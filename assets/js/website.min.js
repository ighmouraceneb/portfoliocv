! function(angular) {
    "use strict";
    
    angular.module("interface", [])
}(window.angular),
function(angular, $link) {
    "use strict";

    function navbar($scope) {
        function link($link, $menu) {
            $menu.on("click", function() {
                $menu[0].clientWidth < 768 && $scope(function() {
                    $menu.toggleClass("open")
                })
            })
        }

        function navbar() {
            var $scope = this;
            return $scope.menu = "Menu", $scope
        }
        return {
            controller: navbar,
            controllerAs: "vm",
            restrict: "AE",
            link: link,
            templateUrl: "views/interface/navbar.min.phtml",
            scope: !1
        }
    }
    angular.module("interface").directive("navbar", navbar), navbar.$inject = ["$timeout"]
}(window.angular, window.document),
function(angular) {
    "use strict";

    function navbar($http) {
        function navbarElement($element) {
            var $scope = this;
            return $scope.anchor = $element.navbarElement,
                $scope.title = $scope.anchor.charAt(0).toUpperCase() + $scope.anchor.substr(1),
                $scope
        };
        var obj = [];
        $http.get('bower.json').success(function(data) { 
            obj.urlViews = data.root.urlViews
        });
        return navbarElement.$inject = ["$scope"], {
            controller: navbarElement,
            controllerAs: "vm",
            restrict: "A",
            templateUrl: "views/interface/navbarElement.min.phtml",
            scope: {
                navbarElement: "@"
            }
        }
    }
    angular.module("interface").directive("navbarElement", ['$http', navbar ])
}(window.angular),


function(angular) {
    'use strict';

    function onclick($scope) {
        $scope.openContact = function(){
            $('.contact').fadeIn();
        };
    }
    angular.module("interface").controller('onClick', ['$scope', onclick ]);
}(window.angular),
function(t) {
    try {
        t = angular.module("website")
    } catch (e) {
        t = angular.module("website", [])
    }
    t.run(["$templateCache", function(t) {
        t.put("", '<div class="nav-header"><span class="hamburger"></span> <span class="title">{{:: vm.menu }}</span></div><ul class="nav-bar"><li navbar-element="profil"></li><li navbar-element="competences"></li><li navbar-element="projets"></li><li navbar-element="contact" class="js-open-contact"></li></ul>')
    }])
}(),
function(t) {
    try {
        t = angular.module("website")
    } catch (e) {
        t = angular.module("website", [])
    }
    t.run(["$templateCache", function(t) {
        t.put("", '<a class="brackets_links" offset="120" du-scrollspy du-smooth-scroll="{{:: vm.anchor }}">{{:: vm.title }}</a>')
    }])
}(),
function(angular) {
    "use strict";

    angular.module("website", [
        "angular-parallax",
        "duScroll",
        "ngTooltip",
        "sticky",
        "interface",
    ]).value(
        "duScrollDuration",
        1500
    );
}(window.angular);


$('document').ready(function(){ 

// ------------------------AJAX---------------------------
    $('.js_submit_contact').click(function(e){
        e.preventDefault();
        var name = $(this).parents('form').find('[name="name"]').val();
        var email = $(this).parents('form').find('[name="email"]').val();
        var subject = $(this).parents('form').find('[name="subject"]').val();
        var message = $(this).parents('form').find('[name="message"]').val();
        var send_copy = $(this).parents('form').find('[name="send_copy"]').val();

        $.post('index.php', {name:name,email:email,subject:subject,message:message,send_copy:send_copy,action:'send_mail'}, function(){
            $.get('index.php?ajax&page=error', function(error){
                if(error == ""){
                    var url = window.location.href.split('/');
                    var newUrl = "";
                    for (i = 0; i < url.length-1; i++) {
                      newUrl += url[i]+"/";
                    }
                    newUrl += 'sendmailsuccess';
                    window.location.href = newUrl ;
                }else{
                    $.get('index.php?ajax&page=contact', function(message){
                        $('.js-contact-error').replaceWith(message);
                    });
                }
            });
        });
    });

// ---------------------THUMBNAIL--------------------------------
    $("a.gallery-item").next("br").remove();
    $("a.gallery-item").mouseover(function(e){
        $("body").append("<img class='features-hover' src='"+$(this).attr("rel")+"' alt='' />");
        $("img.features-hover").css({
                display:"none",
                visibility:"visible"
        })
        .fadeIn(350);
        $(this).children("a.gallery-item img")
            .stop()
            .animate({
                opacity: 0.5,
                top: "5px",
                left: "5px"
        },
        "fast");
    }).mousemove(function(e){
        $("img.features-hover").css({
            left:e.pageX+30,
            top:e.pageY-150
        });
    }).mouseout(function(){
        $(this).children("a.gallery-item img")
            .stop()
            .animate({
                opacity: 1,
                top: "0",
                left: "0"
            },
            "fast");
        $("img.features-hover").remove();
    });

    $(".connect-div a").mouseover(function(){
        $(this).next(".connect-div span img.connect-bg")
            .stop(true, true)
            .animate({
                opacity: "show"
            },
            "fast");
    }).mouseout(function(){
        $(this).next(".connect-div span img.connect-bg")
            .stop(true, true)
            .animate({
                opacity: "hide"
            },
            "fast");
    });

// ------------------------------MODAL--------------------------------
    $('.js-open-contact').click(function(e){
        e.preventDefault();
        $('.contact').fadeIn();
    });
    $('.button-close').click(function(e){
        e.preventDefault();
        $('.contact, .sendmailsuccess').fadeOut();
    });

//-------------------------SCALE ANIMATION---------------------------
    var windowWidth, windowHeight, windowScrollTop;
    function getWindowDimension(){
        windowWidth = window.innerWidth;
        windowHeight = window.innerHeight;
        windowScrollTop = $(window).scrollTop();
    }
    $(window).scroll(function () {
        getWindowDimension();
        var scale = (windowScrollTop/windowHeight > 1)?1:windowScrollTop/windowHeight;
        $('.scale-animation').css({
            opacity:1-(scale/1.5), 
            transform: 'scale('+(1-scale/2)+') translateY('+(scale*350)+'px)'
        });
        $('.scrollDownArrow').css({
            opacity:1-(scale*4)
        });
    });
    
// ----------------------------WOW JS--------------------------------
    new WOW().init();

});
